<!DOCTYPE html>
<header>
    <meta charset="UTF-8">
    <title>문제제작</title>
</header>

<body>
    <form method="post" id="makeData" action="/problems/make">
        <label>제목</label>
        <input type="text" name="name">
        <label>인풋값</label>
        <input type="text" name="input">
        <label>결과값</label>
        <input type="text" name="output">
        <label>설명 </label>
        <input type="text" name="description">
    </form>
    <button type="button" onclick="makeProb();">만들기</button>
    <script type="text/javascript">
        function makeProb() {
            let formData = document.querySelector("#makeData");
            let bodyData = JSON;
            for (let ele of formData.elements) {
                bodyData[ele.name] = ele.value;
            }
            console.log(bodyData)
            fetch("/problems", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(bodyData)
                })
                .then(res => res.json())
                .then(data => {
                    console.log(data);
                    if (data.success) {
                        alert("문제생성 성공!!\n ID: " + data.data);
                    } else {
                        alert("문제생성 실패!!\n" + data.message)
                    }
                }).catch(err => alert("문제생성 실패!!\n" + err))
        }
    </script>
</body>